[
   "Создаём шаблон 1С-Битрикс на базе Bootstrap вёрстки",
   "Введение\r\nУважаемый читатель, данная статья является по сути своей продолжением статьи «Как сверстать веб-страницу. Часть 2 — Bootstrap» и здесь мы отойдём от собственно вёрстки, занявшись интеграцией HTML шаблона в CMS 1С-Битрикс.\n\r\nВ предыдущей части Хабраюзер Mirantus сверстал шаблон Corporate Blue от студии Pcklaboratory с помощью Bootstrap 3.\n\n\n\n\n\r\nДля данной статьи мы воспользуемся одним из форков репозитория на GitHub, приведённого в конце предыдущей статьи, поскольку в нём были исправлены некоторые баги.\n\nСоздание каркаса шаблона\r\nШаблон сайта с точки зрения 1С-Битрикс – это папка с набором определённых файлов внутри, поэтому шаблон может быть создан как через файловую структуру (инструментами 1С-Битрикс, по FTP или SSH), так и с помощью раздела.\n\n\nПервым делом создадим в папке /bitrix/templates/ раздел, название которого в дальнейшем будет использоваться в качестве ID нашего шаблона, например whitesquare-bootstrap (в дальнейшем в рамках статьи мы будем всегда по умолчанию подставлять именно это значение в качестве ID шаблона).\nПеренесём в папку шаблона общие ресурсы (JS, CSS, изображения, шрифты) из шаблона страницы:\n\n\n\nТеперь наша задача создать HTML каркас шаблона. Фактически он состоит из 2 частей, каждая из которых будет лежать в отдельном файле в папке шаблона:\n\n\n/bitrix/templates/whitesquare-bootstrap/header.php\n/bitrix/templates/whitesquare-bootstrap/footer.php\n\r\nЕсли смотреть на шаблон через административный раздел 1С-Битрикс (Настройки>>Настройки продукта>>Сайты>>Шаблоны Сайтов), то мы увидим шаблон целиком, header.php будет отделён от footer.php с помощью тега #WORK_AREA#.\n\r\nМы легко можем выделить на странице контент, который будем помещать в рабочую область (т.е. он будет уникальным для каждой страницы):\n\r\nТаким образом мы можем распределить код index.html из исходного статического шаблона по трём файлам:\n\n/bitrix/templates/whitesquare-bootstrap/header.php<!DOCTYPE html>\n<html>\n  <head>\n    <title>Whitesquare</title>\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <link href=\"css/styles.css\" rel=\"stylesheet\">\n\t<link href=\"http://fonts.googleapis.com/css?family=Oswald:400,300\" rel=\"stylesheet\">\n    <!--[if lt IE 9]>\n      <script src=\"https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js\"></script>\n      <script src=\"https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js\"></script>\n    <![endif]-->\n  </head>\n  <body>\n\t<div class=\"wrapper container\">\n\t\t<header>\n\t\t\t<form name=\"search\" action=\"#\" method=\"get\" class=\"form-inline form-search pull-right\">\n\t\t\t\t<div class=\"input-group\">\n\t\t\t\t\t<label class=\"sr-only\" for=\"searchInput\">Search</label>\n\t\t\t\t\t<input class=\"form-control\" id=\"searchInput\" type=\"text\" name=\"search\" placeholder=\"Search\">\n\t\t\t\t\t<div class=\"input-group-btn\">\n\t\t\t\t\t\t<button type=\"submit\" class=\"btn btn-primary\">GO</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</form>\n    \t\t<a href=\"/\"><img src=\"images/logo.png\" alt=\"Whitesquare logo\"></a>\n\t\t</header>\n\t\t<nav class=\"navbar navbar-default\">\n\t\t\t<ul class=\"nav navbar-nav\">\n\t\t\t\t<li><a href=\"/home/\">Home</a></li>\n\t\t\t\t<li class=\"active\"><a href=\"/about/\">About us</a></li>\n\t\t\t\t<li><a href=\"/services/\">Services</a></li>\n\t\t\t\t<li><a href=\"/partners/\">Partners</a></li>\n\t\t\t\t<li><a href=\"/customers/\">Customers</a></li>\n\t\t\t\t<li><a href=\"/projects/\">Projects</a></li>\n\t\t\t\t<li><a href=\"/careers/\">Careers</a></li>\n\t\t\t\t<li><a href=\"/contact/\">Contact</a></li>\n\t\t\t</ul>\n\t\t</nav>\n\t\t<div class=\"heading\">\n\t\t\t<h1>About us</h1>\n\t\t</div>\n\t\t<div class=\"row\">\n\t\t\t<aside class=\"col-md-7\">\n\t\t\t\t<ul class=\"list-group submenu\">\n\t\t\t\t\t<li class=\"list-group-item active\">Lorem ipsum</li>\n\t\t\t\t\t<li class=\"list-group-item\"><a href=\"/donec/\">Donec tincidunt laoreet</a></li>\n\t\t\t\t\t<li class=\"list-group-item\"><a href=\"/vestibulum/\">Vestibulum elit</a></li>\n\t\t\t\t\t<li class=\"list-group-item\"><a href=\"/etiam/\">Etiam pharetra</a></li>\n\t\t\t\t\t<li class=\"list-group-item\"><a href=\"/phasellus/\">Phasellus placerat</a></li>\n\t\t\t\t\t<li class=\"list-group-item\"><a href=\"/cras/\">Cras et nisi vitae odio</a></li>\n\t\t\t\t</ul>\n\t\t\t\t<div class=\"panel panel-primary\">\n\t\t\t\t\t<div class=\"panel-heading\">Our offices</div>\n\t\t\t\t\t<div class=\"panel-body\">\n\t\t\t\t\t\t<img src=\"images/map.png\" class=\"img-responsive\" alt=\"Our offices\">\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</aside>\n\t\t\t<section class=\"col-md-17\">\n\n\n\n/Index.php(это будет пример рабочей страницы на котором мы будем проверять работоспособность нашей рабочей области) в котором помимо Html разметки мы добавим вызов header’а и footer’а (они создадутся автоматически, если создавать страницу средствами 1С-Битрикс):\n<?require($_SERVER[\"DOCUMENT_ROOT\"].\"/bitrix/header.php\");?>\n\n\n\t\t\t\t<div class=\"jumbotron\">\n\t\t\t\t\t<blockquote>\n\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t“Quisque in enim velit, at dignissim est. nulla ul corper, dolor ac pellentesque\n\t\t\t\t\t\t\tplacerat, justo tellus gravida erat, vel porttitor libero erat.”\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t<small>John Doe, Lorem Ipsum</small>\n\t\t\t\t\t</blockquote>\n\t\t\t\t</div>\n\t\t\t\t<p>\n\t\t\t\t\tLorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean non neque ac sem accumsan rhoncus ut\n\t\t\t\t\tut turpis. In hac habitasse platea dictumst. Proin eget nisi erat, et feugiat arcu. Duis semper\n\t\t\t\t\tporttitor lectus, ac pharetra erat imperdiet nec. Morbi interdum felis nulla. Aenean eros orci,\n\t\t\t\t\tpellentesque sed egestas vitae, auctor aliquam nisi. Nulla nec libero eget sem rutrum iaculis.\n\t\t\t\t\tQuisque in enim velit, at dignissim est. Nulla ullamcorper, dolor ac pellentesque placerat, justo\n\t\t\t\t\ttellus gravida erat, vel porttitor libero erat condimentum metus. Donec sodales aliquam orci id\n\t\t\t\t\tsuscipit. Proin sed risus sit amet massa ultrices laoreet quis a erat. Aliquam et metus id erat\n\t\t\t\t\tvulputate egestas. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus\n\t\t\t\t\tmus.\n\t\t\t\t</p>\n\t\t\t\t<p>\n\t\t\t\t\tDonec vel nisl nibh. Aenean quam tortor, tempus sit amet mattis dapibus, egestas tempor dui. Duis\n\t\t\t\t\tvestibulum imperdiet risus pretium pretium. Nunc vitae porta ligula. Vestibulum sit amet nulla quam.\n\t\t\t\t\tAenean lacinia, ante vitae sodales sagittis, leo felis bibendum neque, mattis sagittis neque urna\n\t\t\t\t\tvel magna. Sed at sem vitae lorem blandit feugiat.\n\t\t\t\t</p>\n\t\t\t\t<p>\n\t\t\t\t\tDonec vel orci purus, ut ornare orci. Aenean rutrum pellentesque quam. Quisque gravida adipiscing\n\t\t\t\t\taugue, eget commodo augue egestas varius. Integer volutpat, tellus porta tincidunt sodales, lacus\n\t\t\t\t\test tempus odio, fringilla blandit tortor lectus ut sem. Pellentesque nec sem lacus, sit amet\n\t\t\t\t\tconsequat neque. Etiam varius urna quis arcu cursus in consectetur dui tincidunt. Quisque arcu orci,\n\t\t\t\t\tlacinia eget pretium vel, iaculis pellentesque nibh. Etiam cursus lacus eget neque viverra\n\t\t\t\t\tvestibulum. Aliquam erat volutpat. Duis pulvinar tellus ut urna facilisis mollis. Maecenas ac\n\t\t\t\t\tpharetra dui. Pellentesque neque ante, luctus eget congue eget, rhoncus vel mauris. Duis nisi magna,\n\t\t\t\t\taliquet a convallis non, venenatis at nisl. Nunc at quam eu magna malesuada dignissim. Duis bibendum\n\t\t\t\t\tiaculis felis, eu venenatis risus sodales non. In ligula mi, faucibus eu tristique sed, vulputate\n\t\t\t\t\trutrum dolor.\n\t\t\t\t</p>\n\t\t\t\t<div class=\"row\">\n\t\t\t\t\t<div class=\"col-md-12\">\n\t\t\t\t\t\t<img src=\"images/about-1.png\" alt=\"\" class=\"thumbnail\">\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"col-md-12\">\n\t\t\t\t\t\t<img src=\"images/about-2.png\" alt=\"\" class=\"thumbnail\">\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<h2>Our team</h2>\n\t\t\t\t<div class=\"team\">\n\t\t\t\t\t<div class=\"row\">\n\t\t\t\t\t\t<div class=\"col col-md-4\">\n\t\t\t\t\t\t\t<img src=\"images/team/Doe.jpg\" alt=\"John Doe\" class=\"thumbnail\">\n\t\t\t\t\t\t\t<div class=\"caption\">\n\t\t\t\t\t\t\t\t<h3>John Doe</h3>\n\t\t\t\t\t\t\t\t<p>ceo</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"col col-md-4 col-md-offset-1\">\n\t\t\t\t\t\t\t<img src=\"images/team/Pittsley.jpg\" alt=\"Saundra Pittsley\" class=\"thumbnail\">\n\t\t\t\t\t\t\t<div class=\"caption\">\n\t\t\t\t\t\t\t\t<h3>Saundra Pittsley</h3>\n\t\t\t\t\t\t\t\t<p>team leader</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"col col-md-4 col-md-offset-1\">\n\t\t\t\t\t\t\t<img src=\"images/team/Simser.jpg\" alt=\"Julio Simser\" class=\"thumbnail\">\n\t\t\t\t\t\t\t<div class=\"caption\">\n\t\t\t\t\t\t\t\t<h3>Julio Simser</h3>\n\t\t\t\t\t\t\t\t<p>senior developer</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"col col-md-4 col-md-offset-1\">\n\t\t\t\t\t\t\t<img src=\"images/team/Venuti.jpg\" alt=\"Margery Venuti\" class=\"thumbnail\">\n\t\t\t\t\t\t\t<div class=\"caption\">\n\t\t\t\t\t\t\t\t<h3>Margery Venuti</h3>\n\t\t\t\t\t\t\t\t<p>senior developer</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"col col-md-4 col-md-offset-1\">\n\t\t\t\t\t\t\t<img src=\"images/team/Tondrea.jpg\" alt=\"Fernando Tondrea\" class=\"thumbnail\">\n\t\t\t\t\t\t\t<div class=\"caption\">\n\t\t\t\t\t\t\t\t<h3>Fernando Tondrea</h3>\n\t\t\t\t\t\t\t\t<p>developer</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"row\">\n\t\t\t\t\t\t<div class=\"col col-md-4\">\n\t\t\t\t\t\t\t<img src=\"images/team/Nobriga.jpg\" alt=\"Ericka Nobriga\" class=\"thumbnail\">\n\t\t\t\t\t\t\t<div class=\"caption\">\n\t\t\t\t\t\t\t\t<h3>Ericka Nobriga</h3>\n\t\t\t\t\t\t\t\t<p>art director</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"col col-md-4 col-md-offset-1\">\n\t\t\t\t\t\t\t<img src=\"images/team/Rousselle.jpg\" alt=\"Cody Rousselle\" class=\"thumbnail\">\n\t\t\t\t\t\t\t<div class=\"caption\">\n\t\t\t\t\t\t\t\t<h3>Cody Rousselle</h3>\n\t\t\t\t\t\t\t\t<p>senior ui designer</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"col col-md-4 col-md-offset-1\">\n\t\t\t\t\t\t\t<img src=\"images/team/Wollman.jpg\" alt=\"Erik Wollman\" class=\"thumbnail\">\n\t\t\t\t\t\t\t<div class=\"caption\">\n\t\t\t\t\t\t\t\t<h3>Erik Wollman</h3>\n\t\t\t\t\t\t\t\t<p>senior ui designer</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"col col-md-4 col-md-offset-1\">\n\t\t\t\t\t\t\t<img src=\"images/team/Shoff.jpg\" alt=\"Dona Shoff\" class=\"thumbnail\">\n\t\t\t\t\t\t\t<div class=\"caption\">\n\t\t\t\t\t\t\t\t<h3>Dona Shoff</h3>\n\t\t\t\t\t\t\t\t<p>ux designer</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"col col-md-4 col-md-offset-1\">\n\t\t\t\t\t\t\t<img src=\"images/team/Brunton.jpg\" alt=\"Darryl Brunton\" class=\"thumbnail\">\n\t\t\t\t\t\t\t<div class=\"caption\">\n\t\t\t\t\t\t\t\t<h3>Darryl Brunton</h3>\n\t\t\t\t\t\t\t\t<p>ui designer</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\n<?require($_SERVER[\"DOCUMENT_ROOT\"].\"/bitrix/footer.php\");?>\n\n\n\n/bitrix/templates/whitesquare-bootstrap/footer.php\t\t\t</section>\n\t\t</div>\n\t</div>\n\t<footer>\n\t\t<div class=\"container\">\n\t\t\t<div class=\"row\">\n\t\t\t\t<div class=\"col-md-8 twitter\">\n\t\t\t\t\t<h3>Twitter feed</h3>\n\t\t\t\t\t<time datetime=\"2012-10-23\"><a href=\"#\">23 oct</a></time>\n\t\t\t\t\t<p>\n\t\t\t\t\t\tIn ultricies pellentesque massa a porta. Aliquam ipsum enim, hendrerit ut porta nec, ullamcorper et nulla. In eget mi dui, sit amet scelerisque nunc. Aenean aug\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"col-md-4 sitemap\">\n\t\t\t\t\t<h3>Sitemap</h3>\n\t\t\t\t\t<div class=\"row\">\n\t\t\t\t\t\t<div class=\"col-md-12\">\n\t\t\t\t\t\t\t<a href=\"/home/\">Home</a>\n\t\t\t\t\t\t\t<a href=\"/about/\">About</a>\n\t\t\t\t\t\t\t<a href=\"/services/\">Services</a>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"col-md-12\">\n\t\t\t\t\t\t\t<a href=\"/partners/\">Partners</a>\n\t\t\t\t\t\t\t<a href=\"/customers/\">Support</a>\n\t\t\t\t\t\t\t<a href=\"/contact/\">Contact</a>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"col-md-4 social\">\n\t\t\t\t\t<h3>Social networks</h3>\n\t\t\t\t\t<a href=\"http://twitter.com/\" class=\"social-icon twitter\"></a>\n\t\t\t\t\t<a href=\"http://facebook.com/\" class=\"social-icon facebook\"></a>\n\t\t\t\t\t<a href=\"http://plus.google.com/\" class=\"social-icon google-plus\"></a>\n\t\t\t\t\t<a href=\"http://vimeo.com/\" class=\"social-icon-small vimeo\"></a>\n\t\t\t\t\t<a href=\"http://youtube.com/\" class=\"social-icon-small youtube\"></a>\n\t\t\t\t\t<a href=\"http://flickr.com/\" class=\"social-icon-small flickr\"></a>\n\t\t\t\t\t<a href=\"http://instagram.com/\" class=\"social-icon-small instagram\"></a>\n\t\t\t\t\t<a href=\"/rss/\" class=\"social-icon-small rss\"></a>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"col-md-8 footer-logo\">\n\t\t\t\t\t<a href=\"/\"><img src=\"images/footer-logo.png\" alt=\"Whitesquare logo\"></a>\n\t\t\t\t\t<p>\n\t\t\t\t\t\tCopyright © 2012 Whitesquare. A\n\t\t\t\t\t\t<a href=\"http://pcklab.com\">pcklab</a> creation\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</footer>\n  </body>\n</html>\n\n\n\n\n\n\nЭлементы 1С-Битрикс\n\n\nДобавим подключение пролога и языковых файлов. Это необходимо сделать как в header.php, так и в footer.php (т.е. в начале шаблона и сразу после #WORKAREA#)\n<?if(!defined(\"B_PROLOG_INCLUDED\") || B_PROLOG_INCLUDED!==true)die();\nIncludeTemplateLangFile(__FILE__);?>\nЗаменим текст внутри тега <title> на вызов функции:\n<title><? $APPLICATION->ShowTitle(false); ?></title>\nЗаменим текст внутри тега <h1> на вызов функции:\n<h1><?$APPLICATION->ShowTitle()?></h1>Как видите используютcя разные параметры для вызова одной отложенной функции, чтобы можно было задать разные значения для заголовка браузера и заголовка видимой части страницы, если это потребуется SEO специалистам.\nДобавим вывод мета-данных (ключевых слов и описания для поисковых систем):\n<?$APPLICATION->ShowMeta(\"keywords\")?>\n<?$APPLICATION->ShowMeta(\"description\")?>\nЗададим относительный путь ко всем файлам шаблона (картинка, CSS, JS, шрифтам) — <?=SITE_TEMPLATE_PATH?> — данная функция задаёт путь к шаблону относительно корня сайта (и позволяет не прописывать в явном виде идентификатор шаблона, что полезно при копировании или переименовании оного). В результате мы получим:\n<link href=\"<?=SITE_TEMPLATE_PATH?>/css/styles.css\" rel=\"stylesheet\">\n…\n<a href=\"/\"><img src=\"<?=SITE_TEMPLATE_PATH?>/images/logo.png\" alt=\"Whitesquare logo\"></a>\n…\n<img src=\"<?=SITE_TEMPLATE_PATH?>/images/map.png\" class=\"img-responsive\" alt=\"Our offices\">\n…\n<a href=\"/\"><img src=\"<?=SITE_TEMPLATE_PATH?>/images/footer-logo.png\" alt=\"Whitesquare logo\"></a>Аналогичным образом мы можем использовать SITE_TEMPLATE_PATH и в index.php, однако следует помнить о том, что при смене шаблона в настройках сайта, применяемого к странице, изменится и этот путь!\n\n<?$APPLICATION->ShowMeta(\"description\")?>\r\nДобавим вызов функции $APPLICATION->ShowHead();, которая служит сразу нескольким целям (в частности динамическому подключению CSS и JS библиотек, объявленных в компонентах в теле страниц с помощью отложенных функций в заголовке, а так же объединяет и сжимает эти библиотеки, если используется соответствующая настройка 1С-Битрикс)\r\nС помощью отложенных функций SetAdditionalCSS и AddHeadScript мы можем всегда подключить CSS и JS в <header>, а так же избежать повторного подключения одинаковых библиотек (это особенно актуально, например для JQuery, если вы подключаете её не централизованно в шаблоне сайта, в соответствующих компонентах и таких компонентов окажется на странице несколько).\r\nВажно помнить, что мы не можем таким образом воспроизвести конструкции типа <!--[if lt IE 9]> для устаревших браузеров, поэтому целиком конструкция будет иметь вид:\n<?\n$APPLICATION->ShowHead();\n$APPLICATION->SetAdditionalCSS(SITE_TEMPLATE_PATH.'/css/styles.css');\n$APPLICATION->SetAdditionalCSS('http://fonts.googleapis.com/css?family=Oswald:400,300');\n?>\n    <!--[if lt IE 9]>\n      <script src=\"https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js\"></script>\n      <script src=\"https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js\"></script>\n    <![endif]-->\n\nДобавляем панель инструментов 1С-Битрикс сразу после открытия тега <body> — <?$APPLICATION->ShowPanel();?>\n\n\r\nФактически мы создали статичный HTML каркас с минимальным набором элементов 1С-Битрикс, который уже работает.\r\nДальнейшая наша задача – перевод отдельных функциональных блоков на работу с компонентами 1С-Битрикс.\n\nКомпоненты 1С-Битрикс\r\nВ рамках данной статьи мы остановимся только на процессе интеграции вёрстки со стандартными компонентами 1С-Битрикс. Мы не будем создавать свои компоненты и не будем кастомизировать типовые.\n\r\nМы создадим отдельную страницу (например, 1.php) на которой будем размещать по 1 компоненту для упрощения работы средствами 1С-Битрикс.\n\nКопирование шаблона компонента в шаблон сайтаРазместим компонента (например, форму поиска — bitrix:search.form) с помощью визуального редактора:\n\r\nИспользуя включенный режим правки скопируем шаблон компонента в шаблон сайта. Для этого наведём курсор мыши на область с компонентом, дождёмся пока появится контекстное меню с шестерёнкой и нажмём на стрелку выпадающего списка:\n\r\nВ появившемся диалоге нам необходимо указать имя шаблона компонента и выбрать шаблон сайта в котором будет хранится шаблон компонента (в нашем случае это whitesquare-bootstrap):\n\r\nВ результате наших действий в Шаблоне компонента /bitrix/templates/whitesquare-bootstrap/ появилась ещё одна папка – components – в ней будут находиться шаблоны всех компонентов, используемых в рамках шаблона сайта.\r\nПервый появившийся шаблон компонента будет расположен по адресу /bitrix/templates/whitesquare-bootstrap/components/bitrix/search.form/top/\nОпытные разработчики могут сразу создавать шаблон компонента, копируя его в шаблон сайта из компонента.\n\r\nИногда для дальнейшей работы больше подходит один из шаблонов компонента, поставляемых вместе с системой. Тогда имеет смысл посмотреть каждый из них в работе. Это можно сделать в визуальном редакторе по нажатию на кнопку шестерёнки:\n\n\n\nВключаемые области (лого, копирайт, соц сети)\r\nКомпонент включаемой области позволяет вложить внутрь себя любой текст, HTML или php код, а так же другие компоненты и вывести этот контент для определённой страницы, раздела или везде, где вызывается включаемая область.\r\nДля всех указанных выше объектов мы считаем рациональным использование включаемой области с целью вынести эти блоки из шаблона. Т.е. для их редактирования по прежнему необходимо будет владеть минимумом познаний в HTML.\nПрофессионалы могут возразить, что для блока с кнопками соц сетей следовало бы сделать свой компонент, однако нам это кажется не рациональным. Проще загнать этот блок за 10 минут во включаемую область и отредактировать при необходимости, ведь адрес сообщества Facebook не меняется каждый день!\n\r\nВсе эти области будут выводиться на всём сайте, поэтому создадим в шаблоне новую папку include, где будем складывать файлы включаемых областей:\n\n/bitrix/templates/whitesquare-bootstrap/include/bottom-logo.php\n/bitrix/templates/whitesquare-bootstrap/include/copyright.php\n/bitrix/templates/whitesquare-bootstrap/include/social-networks.php\n/bitrix/templates/whitesquare-bootstrap/include/top_logo.php\n\r\nКод вызова компонента включаемой области будет выглядеть в этом случае так:\n<?$APPLICATION->IncludeComponent(\n\t\"bitrix:main.include\",\n\t\"\",\n\tArray(\n\t\t\"AREA_FILE_SHOW\" => \"file\",\n\t\t\"PATH\" => SITE_TEMPLATE_PATH.\"/include/bottom-logo.php\",\n\t\t\"EDIT_TEMPLATE\" => \"\"\n\t),\nfalse\n);?>\n\r\nВнутри файла включаемой области просто помещаем кусок HTML кода:\n<a href=\"/\"><img src=\"<?=SITE_TEMPLATE_PATH?>/images/footer-logo.png\" alt=\"Whitesquare logo\"></a>\n\n\r\nМы не будем в данной статье рассматривать вопрос интеграции Twitter Ленты, поскольку самое простое решение – положить виджет твиттера во включаемую область, аналогично описанным выше решениям.\r\nТак же в Marketplace 1С-Битрикс хватает компонентов, выводящих твиттер ленту, которыми вы так же можете воспользоваться.\n\nФорма поиска\r\nМы воспользовались компонентом bitrix:search.form и скопировали suggest шаблон компонента в шаблон сайта.\r\nHTML код шаблона компонента находится в файле /bitrix/templates/whitesquare-bootstrap/components/bitrix/search.form/top/template.php\n<?if(!defined(\"B_PROLOG_INCLUDED\") || B_PROLOG_INCLUDED!==true)die();?>\n<div class=\"search-form\">\n<form action=\"<?=$arResult[\"FORM_ACTION\"]?>\">\n\t<?$APPLICATION->IncludeComponent(\n\t\t\"bitrix:search.suggest.input\",\n\t\t\"\",\n\t\tarray(\n\t\t\t\"NAME\" => \"q\",\n\t\t\t\"VALUE\" => \"\",\n\t\t\t\"INPUT_SIZE\" => 15,\n\t\t\t\"DROPDOWN_SIZE\" => 10,\n\t\t),\n\t\t$component, array(\"HIDE_ICONS\" => \"Y\")\n\t);?> <input name=\"s\" type=\"submit\" value=\"<?=GetMessage(\"BSF_T_SEARCH_BUTTON\");?>\" />\n</form>\n</div>\n\r\nКак видим, у нас не простой, а комплексный компонент (т.е. компонент в состав которого входят другие компоненты). В данном случае это сама форма в которую производится ввод поискового запроса.\r\nСкопируем её шаблон в шаблон сайта.\r\nК сожалению, это не очень красиво – в публичке мы используем 1 компонент, а шаблонов у нас 2. Воспользуемся обычной схемой для комплексных компонентов:\nКомплексный компонент\n\nСоздадим в папке /bitrix/templates/whitesquare-bootstrap/components/bitrix/search.form/top/ папку bitrix\nПереместим шаблон компонента /bitrix/templates/whitesquare-bootstrap/components/bitrix/search.suggest.input/ в /bitrix/templates/whitesquare-bootstrap/components/bitrix/search.form/top/bitrix/. Таким образом получив:\r\n/bitrix/templates/whitesquare-bootstrap/components/bitrix/search.form/top/bitrix/search.suggest.input/top/\nВ параметрах компонента bitrix:search.suggest.input укажем шаблон top:\n<?$APPLICATION->IncludeComponent(\n\t\t\"bitrix:search.suggest.input\",\n\t\t\"top\",\n\t\tarray(\n\t\t\t\"NAME\" => \"q\",\n\t\t\t\"VALUE\" => \"\",\n\t\t\t\"INPUT_SIZE\" => 15,\n\t\t\t\"DROPDOWN_SIZE\" => 10,\n\t\t),\n\t\t$component, array(\"HIDE_ICONS\" => \"Y\")\n);?>\n\n\n\nВернёмся к форме поиска\r\nИтак, мы видим, что в отличие от цельного блока поиска в вёрстке в архитектуре 1С-Битрикс наша форма будет состоять из 2 вложенных шаблонов (комплексного и простого) компонентов.\n\n/bitrix/templates/whitesquare-bootstrap/components/bitrix/search.form/top/template.php\n<?if(!defined(\"B_PROLOG_INCLUDED\") || B_PROLOG_INCLUDED!==true)die();?>\n\n<form name=\"search\" action=\"<?=$arResult[\"FORM_ACTION\"]?>\" method=\"get\" class=\"form-inline form-search pull-right\">\n<div class=\"input-group\">\n\t<?$APPLICATION->IncludeComponent(\n\t\t\"bitrix:search.suggest.input\",\n\t\t\"top\",\n\t\tarray(\n\t\t\t\"NAME\" => \"q\",\n\t\t\t\"VALUE\" => \"\",\n\t\t\t\"INPUT_SIZE\" => 15,\n\t\t\t\"DROPDOWN_SIZE\" => 10,\n\t\t),\n\t\t$component, array(\"HIDE_ICONS\" => \"Y\")\n\t);?><div class=\"input-group-btn\"><input name=\"s\" class=\"btn btn-primary\" type=\"submit\" value=\"<?=GetMessage(\"BSF_T_SEARCH_BUTTON\");?>\" /></div>\n</div>\n</form>\n\n/bitrix/templates/whitesquare-bootstrap/components/bitrix/search.form/top/bitrix/search.suggest.input/top/template.php\n<?if(!defined(\"B_PROLOG_INCLUDED\") || B_PROLOG_INCLUDED!==true)die();\nCJSCore::Init(array(\"ajax\"));\n?>\n<script type=\"text/javascript\">\nif (!window.oObject || typeof oObject != \"object\")\n\twindow.oObject = {};\n\nwindow.<?= $arResult[\"ID\"]?>_CheckThis = document.<?= $arResult[\"ID\"]?>_CheckThis = function(oObj)\n{\n\ttry\n\t{\n\t\tif(SuggestLoaded)\n\t\t{\n\t\t\tif (typeof window.oObject[oObj.id] != 'object')\n\t\t\t\twindow.oObject[oObj.id] = new JsSuggest(oObj, '<?echo $arResult[\"ADDITIONAL_VALUES\"]?>');\n\t\t\treturn;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tsetTimeout(<?echo $arResult[\"ID\"]?>_CheckThis(oObj), 10);\n\t\t}\n\t}\n\tcatch(e)\n\t{\n\t\tsetTimeout(<?echo $arResult[\"ID\"]?>_CheckThis(oObj), 10);\n\t}\n}\n</script>\n\n\n<IFRAME style=\"width:0px; height:0px; border: 0px;\" src=\"javascript:''\" name=\"<?echo $arResult[\"ID\"]?>_div_frame\" id=\"<?echo $arResult[\"ID\"]?>_div_frame\"></IFRAME>\n<label class=\"sr-only\" for=\"searchInput\">Search</label>\n<input class=\"form-control\" id=\"searchInput\" type=\"text\" name=\"search\" placeholder=\"<?=GetMessage(\"BSF_T_SEARCH_FORM\");?>\" <?if($arParams[\"INPUT_SIZE\"] > 0):?> size=\"<?echo $arParams[\"INPUT_SIZE\"]?>\"<?endif?>  value=\"<?echo $arParams[\"VALUE\"]?>\" autocomplete=\"off\" onfocus=\"<?echo $arResult[\"ID\"]?>_CheckThis(this);\" />\n\nКак вы можете видеть, мы заменили фразы “GO” и “Search” в компонентах на вызов GetMessage – таким образом, мы вынесли фразы в языковые файлы и можем задать разные значения для русского и английского сайтов, использующих общий шаблон и общий компонент.\nПро языковые файлыЯзыковые файлы хранятся в той же папке, что и шаблон (или шаблон компонента) в подпапке /lang/ID_языка/ в файле с тем же именем, что и оригинальный файл в котором вызывается GetMessage.\r\nЯзыковой файл представляет из себя массив с ключами и значениями языковых фраз.\r\nВ нашем случае это:\n\n/bitrix/templates/whitesquare-bootstrap/components/bitrix/search.form/top/bitrix/search.suggest.input/top/lang/ru/template.php <?$MESS ['BSF_T_SEARCH_FORM'] = \"Запрос\";?>\n/bitrix/templates/whitesquare-bootstrap/components/bitrix/search.form/top/bitrix/search.suggest.input/top/lang/en/template.php <?$MESS ['BSF_T_SEARCH_FORM'] = \"Search\";?>\n/bitrix/templates/whitesquare-bootstrap/components/bitrix/search.form/top/lang/ru/template.php <?$MESS ['BSF_T_SEARCH_BUTTON'] = \"ИСКАТЬ\";?>\n/bitrix/templates/whitesquare-bootstrap/components/bitrix/search.form/top/lang/en/template.php <?$MESS ['BSF_T_SEARCH_BUTTON'] = \"GO\";?>\n\nНа наш взгляд русские версии очень «корявые», однако мы создали их лишь для демонстрации механизма языковых файлов. При желании в них можно разместить английский текст или оставить пустыми.\n\r\nТеперь осталось лишь разместить код вызов компонента вместо вёрстки в шаблоне:\n<form name=\"search\" action=\"#\" method=\"get\" class=\"form-inline form-search pull-right\">\n\t<div class=\"input-group\">\n\t\t<label class=\"sr-only\" for=\"searchInput\">Search</label>\n\t\t<input class=\"form-control\" id=\"searchInput\" type=\"text\" name=\"search\" placeholder=\"Search\">\n\t\t<div class=\"input-group-btn\">\n\t\t\t<button type=\"submit\" class=\"btn btn-primary\">GO</button>\n\t\t</div>\n\t</div>\n</form>\n\n\nВерхнее меню\r\nДля упрощения работы над сайтом перед началом работы над каждым меню мы будем создавать файл меню с актуальным контентом для упрощения работы.\nНапример, верхнее меню будет задаваться в файле .top.menu.php со следующим содержимым<?\n$aMenuLinks = Array(\n\tArray(\n\t\t\"Home\", \n\t\t\"/\", \n\t\tArray(), \n\t\tArray(), \n\t\t\"\" \n\t),\n\tArray(\n\t\t\"About us\", \n\t\t\"/about/\", \n\t\tArray(), \n\t\tArray(), \n\t\t\"\" \n\t),\n\tArray(\n\t\t\"Services\", \n\t\t\"\", \n\t\tArray(), \n\t\tArray(), \n\t\t\"\" \n\t),\n\tArray(\n\t\t\"Partners\", \n\t\t\"\", \n\t\tArray(), \n\t\tArray(), \n\t\t\"\" \n\t),\n\tArray(\n\t\t\"Customers\", \n\t\t\"\", \n\t\tArray(), \n\t\tArray(), \n\t\t\"\" \n\t),\n\tArray(\n\t\t\"Projects\", \n\t\t\"\", \n\t\tArray(), \n\t\tArray(), \n\t\t\"\" \n\t),\n\tArray(\n\t\t\"Careers\", \n\t\t\"\", \n\t\tArray(), \n\t\tArray(), \n\t\t\"\" \n\t),\n\tArray(\n\t\t\"Contact\", \n\t\t\"\", \n\t\tArray(), \n\t\tArray(), \n\t\t\"\" \n\t)\n);\n?>\n\r\nДля создания верхнего меню воспользуемся компонентом bitrix:menu. Скопируем шаблон .default этого компонента в шаблон нашего сайта под именем top. Он практически не содержит ничего лишнего, поэтому мы легко адаптируем его под нашу вёрстку:\n<?if (!defined(\"B_PROLOG_INCLUDED\") || B_PROLOG_INCLUDED!==true)die();?>\n\n<?if (!empty($arResult)):?>\n\t\t<nav class=\"navbar navbar-default\">\n\t\t\t<ul class=\"nav navbar-nav\">\n<?\nforeach($arResult as $arItem):\n\tif($arParams[\"MAX_LEVEL\"] == 1 && $arItem[\"DEPTH_LEVEL\"] > 1) \n\t\tcontinue;\n?>\n\t<?if($arItem[\"SELECTED\"]):?>\n\t\t<li class=\"active\"><a href=\"<?=$arItem[\"LINK\"]?>\"><?=$arItem[\"TEXT\"]?></a></li>\n\t<?else:?>\n\t\t<li><a href=\"<?=$arItem[\"LINK\"]?>\"><?=$arItem[\"TEXT\"]?></a></li>\n\t<?endif?>\n\t\n<?endforeach?>\n\t\t\t</ul>\n\t\t</nav>\n<?endif?>\n\r\nТеперь заменим блок верхнего меню в шаблоне на вызов компонента меню:\n<?$APPLICATION->IncludeComponent(\"bitrix:menu\", \"top\", Array(\n\t\"ROOT_MENU_TYPE\" => \"top\",\n\t\"MENU_CACHE_TYPE\" => \"A\",\n\t\"MENU_CACHE_TIME\" => \"3600\",\n\t\"MENU_CACHE_USE_GROUPS\" => \"Y\",\n\t\"MENU_CACHE_GET_VARS\" => \"\",\n\t\"MAX_LEVEL\" => \"1\",\t\n\t\"CHILD_MENU_TYPE\" => \"left\",\t\n\t\"USE_EXT\" => \"N\",\t\n\t\"DELAY\" => \"N\",\t\n\t\"ALLOW_MULTI_SELECT\" => \"N\",\n\t),\n\tfalse\n);?>\n\n\nЛевое меню\r\nАналогично верхнему меню возьмём за основу компонент компонентом bitrix:menu. Скопируем шаблон .default этого компонента в шаблон нашего сайта под именем left.\r\nПосле правки шаблона получим:\n<?if (!defined(\"B_PROLOG_INCLUDED\") || B_PROLOG_INCLUDED!==true)die();?>\n\n<?if (!empty($arResult)):?>\n<ul class=\"list-group submenu\">\n\n<?\nforeach($arResult as $arItem):\n\tif($arParams[\"MAX_LEVEL\"] == 1 && $arItem[\"DEPTH_LEVEL\"] > 1) \n\t\tcontinue;\n?>\n\t<?if($arItem[\"SELECTED\"]):?>\n\t\t<li class=\"list-group-item active\"><?=$arItem[\"TEXT\"]?></li>\n\t<?else:?>\n\t\t<li class=\"list-group-item\"><a href=\"<?=$arItem[\"LINK\"]?>\"><?=$arItem[\"TEXT\"]?></a></li>\n\t<?endif?>\n\t\n<?endforeach?>\n\n</ul>\n<?endif?>\n\r\nЗаменим блок левого меню в шаблоне вызовом компонента:\n<?$APPLICATION->IncludeComponent(\"bitrix:menu\", \"left\", Array(\n\t\"ROOT_MENU_TYPE\" => \"left\",\t\n\t\"MENU_CACHE_TYPE\" => \"A\",\t\n\t\"MENU_CACHE_TIME\" => \"3600\",\n\t\"MENU_CACHE_USE_GROUPS\" => \"Y\",\t\n\t\"MENU_CACHE_GET_VARS\" => \"\",\n\t\"MAX_LEVEL\" => \"1\",\t\n\t\"CHILD_MENU_TYPE\" => \"left\",\n\t\"USE_EXT\" => \"N\",\n\t\"DELAY\" => \"N\",\t\n\t\"ALLOW_MULTI_SELECT\" => \"N\",\n\t),\n\tfalse\n);?>\n\nПользуясь тем, что в 1С-Битрикс меню наследуется мы можем положить файлы левого меню .left.menu.php во все разделы, где они нужны с разным содержимым, а в корне, например, вовсе убрать. Вёрстка не пострадает, а меню будет отображаться лишь там, где это необходимо.\n\nНижнее меню\r\nНижнее меню (в разделе SiteMap) отображается в 2 колонки. Можно конечно сделать универсальный компонент меню в шаблоне которого пункты будут делиться по столбцам (автоматически, либо по наличию какого-либо параметра, установленного для пунктов в режиме расширенного редактирования меню).\r\nОднако, мы понимаем, что подвал – не самая часто редактируемая часть и нет смысла тратить значительные усилия на его разработку.\r\nПоэтому мы пойдём по простому пути (за который любители идеального кода, вероятно, нас проклянут) – мы создадим 2 меню: bottomL и bottomR.\r\nНесмотря на то, что меню будет 2 шаблон мы для них будем использовать 1.\n\r\nВновь возьмём за основу компонент компонентом bitrix:menu. Скопируем шаблон .default этого компонента в шаблон нашего сайта под именем bottom.\r\nШаблон:\n<?if (!defined(\"B_PROLOG_INCLUDED\") || B_PROLOG_INCLUDED!==true)die();?>\n\n<?if (!empty($arResult)):?>\n<div class=\"col-md-12\">\n\n<?\nforeach($arResult as $arItem):\n\tif($arParams[\"MAX_LEVEL\"] == 1 && $arItem[\"DEPTH_LEVEL\"] > 1) \n\t\tcontinue;\n?>\n\n<a href=\"<?=$arItem[\"LINK\"]?>\"><?=$arItem[\"TEXT\"]?></a>\n\n<?endforeach?>\n\n</div>\n<?endif?>\n\n\nСайдбар – наши офисы\r\nЧестно говоря без демо контента не понятно какую функцию оный сайдбар выполняет. Рискнём предположить, что всё-таки в нём показывается не картинка (уж больно несовременно), а полноценная карта Google. Наверное она маловата, чтобы располагать на ней элементы управления, так что она будет манималистичной.\r\nЕсли же я не прав, то пожалуй один из самых простых способов реализации сайдбара – включаемая область, о которых мы уже говорили.\r\nВозьмём компонент bitrix:map.google.view и скопируем шаблон .default в шаблон сайта, переименовав в sidebar-map.\r\nМы весь сайдбар сделаем частью компонента, включая заголовок. А значит, чтобы упростить работу редакторов необходимо вынести текст заголовка в параметры компонента.\r\nСоздадим в шаблоне компонента файл .parameters.php следующего содержания:\n<?\nif (!defined(\"B_PROLOG_INCLUDED\") || B_PROLOG_INCLUDED!==true) die();\n\n$arTemplateParameters = array(\n\t\"SIDEBAR_MAP_NAME\" => Array(\n\t\t\"NAME\" => GetMessage(\"SIDEBAR_MAP_NAME\"),\n\t\t\"TYPE\" => \"HTML\",\n\t\t\"DEFAULT\" => \"Our offices\",\n\t),\n);\n?>\n\nИ языковые файлы по аналогии с языковыми файлами компонента формы поиска:\nRU (/bitrix/templates/whitesquare-bootstrap/components/bitrix/map.google.view/sidebar-map/lang/ru/.parameters.php):\n<?$MESS ['SIDEBAR_MAP_NAME'] = \"Название карты\";?>\nEN (/bitrix/templates/whitesquare-bootstrap/components/bitrix/map.google.view/sidebar-map/lang/en/.parameters.php):\n<?$MESS ['SIDEBAR_MAP_NAME'] = \"Sidebar Map Name\";?>\n\n\n\r\nШаблон компонента в таком случае модифицируется совсем незначительно (поместим карту внутрь сайдбара и добавим заголовок):\n<?\nif (!defined(\"B_PROLOG_INCLUDED\") || B_PROLOG_INCLUDED!==true) die();\n\n$arTransParams = array(\n\t'INIT_MAP_TYPE' => $arParams['INIT_MAP_TYPE'],\n\t'INIT_MAP_LON' => $arResult['POSITION']['google_lon'],\n\t'INIT_MAP_LAT' => $arResult['POSITION']['google_lat'],\n\t'INIT_MAP_SCALE' => $arResult['POSITION']['google_scale'],\n\t'MAP_WIDTH' => $arParams['MAP_WIDTH'],\n\t'MAP_HEIGHT' => $arParams['MAP_HEIGHT'],\n\t'CONTROLS' => $arParams['CONTROLS'],\n\t'OPTIONS' => $arParams['OPTIONS'],\n\t'MAP_ID' => $arParams['MAP_ID'],\n);\n\nif ($arParams['DEV_MODE'] == 'Y')\n{\n\t$arTransParams['DEV_MODE'] = 'Y';\n\tif ($arParams['WAIT_FOR_EVENT'])\n\t\t$arTransParams['WAIT_FOR_EVENT'] = $arParams['WAIT_FOR_EVENT'];\n}\n?>\n\t\t\t\t<div class=\"panel panel-primary\">\n\t\t\t\t\t<div class=\"panel-heading\"><?=$arParams['SIDEBAR_MAP_NAME']?></div>\n\t\t\t\t\t<div class=\"panel-body\">\n<div class=\"bx-yandex-view-layout\">\n\t<div class=\"bx-yandex-view-map\">\n<?\n//echo '<pre>'; print_r($arResult['POSITION']); echo '</pre>';\n\n$APPLICATION->IncludeComponent('bitrix:map.google.system', '.default', $arTransParams, false, array('HIDE_ICONS' => 'Y'));\n?>\n\t</div>\n</div>\n<?if (is_array($arResult['POSITION']['PLACEMARKS']) && ($cnt = count($arResult['POSITION']['PLACEMARKS']))):?>\n<script type=\"text/javascript\">\nfunction BX_SetPlacemarks_<?echo $arParams['MAP_ID']?>()\n{\n<?\n\tfor($i = 0; $i < $cnt; $i++):\n?>\n\tBX_GMapAddPlacemark(<?echo CUtil::PhpToJsObject($arResult['POSITION']['PLACEMARKS'][$i])?>, '<?echo $arParams['MAP_ID']?>');\n<?\n\tendfor;\n?>\n}\n\nfunction BXShowMap_<?echo $arParams['MAP_ID']?>() {BXWaitForMap_view('<?echo $arParams['MAP_ID']?>');}\n\nBX.ready(BXShowMap_<?echo $arParams['MAP_ID']?>);\n</script>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n<?endif;?>\n\r\nТеперь можно поместить вызов компонента сайдбара в шаблон сайта (если он должен выводиться на всём сайте, а лишь в определённых разделах, то достаточно обернуть его во включаемую область):\n<?$APPLICATION->IncludeComponent(\"bitrix:map.google.view\", \"sidebar-map\", array(\n\t\"INIT_MAP_TYPE\" => \"ROADMAP\",\n\t\"MAP_DATA\" => \"a:4:{s:10:\\\"google_lat\\\";d:55.7383;s:10:\\\"google_lon\\\";d:37.5946;s:12:\\\"google_scale\\\";i:13;s:10:\\\"PLACEMARKS\\\";a:1:{i:0;a:3:{s:4:\\\"TEXT\\\";s:10:\\\"Test point\\\";s:3:\\\"LON\\\";d:37.593626976013184;s:3:\\\"LAT\\\";d:55.736905609230966;}}}\",\n\t\"MAP_WIDTH\" => \"235\",\n\t\"MAP_HEIGHT\" => \"180\",\n\t\"CONTROLS\" => array(\n\t),\n\t\"OPTIONS\" => array(\n\t\t0 => \"ENABLE_SCROLL_ZOOM\",\n\t\t1 => \"ENABLE_DBLCLICK_ZOOM\",\n\t\t2 => \"ENABLE_DRAGGING\",\n\t\t3 => \"ENABLE_KEYBOARD\",\n\t),\n\t\"MAP_ID\" => \"\",\n\t\"SIDEBAR_MAP_NAME\" => \"Our offices\"\n\t),\n\tfalse\n);?>\n\nТеперь пришла пора взяться за рабочую область!\n\nСписок членов команды\r\nДля начала создадим инфоблок в котором будет хранить информацию о персонах. Из имеющегося макета видно, что нужны как минимум 4 поля:\n\nИмя\nФото (миниатюра)\nДолжность\nПорядок относительно других членов команды\n\r\nДля единственного нестандартного поля (должность) следует завести свойство в настройках инфоблока.\r\nДля универсальности решения мы будем оперировать не ID, а символьными кодами инфоблоков (это очень здорово помогает при переносе компонентов и шаблонов с тестового сервера на боевой, если там разное количество или разный порядок создания инфоблоков и их ID не совпадают).\n\nСимвольный код инфоблока – TEAM\nСимвольный код свойства «Должность» — POSITION\n\n\r\nМожет показаться, что на этом этапе нам подойдёт компонент catalog.section с шаблоном board (этот шаблон генерирует таблицу с заданным количеством столбцов), однако в процессе эксплуатации такое решение весьма вероятно окажется сложнее. Поэтому мы всё же воспользуемся bitrix:news.list (скопировав шаблон .default в шаблон сайта под именем team-list) и допишем немного собственного кода.\r\nДобавим в .parameters.php нашего шаблона новое значение:\n$arTemplateParameters = array(\n\t\"LIST_NAME\" => Array(\n\t\t\"NAME\" => GetMessage(\"LIST_NAME\"),\n\t\t\"TYPE\" => \"HTML\",\n\t\t\"DEFAULT\" => \"Our Team\",\n\t),\n);\n\r\nНе забудем добавить значения в языковые файлы!\n\nТеперь возьмёмся за шаблон компонента. Тут нам понадобится простенький счётчик, который будет закрывать строчные блоки row и ставить отступ для 2,3,4 и 5 блоков в одной строке.\n<?\n$i++;\nif ($i >= 5) {\n   $i = 0;\n?>\n   </div><div class=\"row\">\n<?\n}\n?>\n<?endforeach;?>\n\n<?\nif ($i > 0) {\n?>\n   </div>\n<?\n}\n?>\n\nНе забудьте обнулить счётчик перед началом цикла на всякий пожарный.\n\r\nПомимо счётчика нам понадобится вывести значение нашего свойства «Должность», для которого мы задали код POSITION. В массиве с данными, которые отдаёт компонент это свойство хранится в $arResult[«ITEMS»][«PROPERTIES»][«POSITION»][«VALUE»], поскольку мы будем выводить свойство в перебираемом по ITEMS элементам, то это будет выглядеть:\n<?=$arItem[\"PROPERTIES\"][\"POSITION\"][\"VALUE\"]?>\r\nСам шаблон тогда будет выглядеть так:\n<?if(!defined(\"B_PROLOG_INCLUDED\") || B_PROLOG_INCLUDED!==true)die();\n$i=0;?>\n<h2><?=$arParams['LIST_NAME']?></h2>\n\n<div class=\"team\">\n\t<div class=\"row\">\n<?if($arParams[\"DISPLAY_TOP_PAGER\"]):?>\n\t<?=$arResult[\"NAV_STRING\"]?><br />\n<?endif;?>\n<?foreach($arResult[\"ITEMS\"] as $arItem):?>\n\t<?\n\t$this->AddEditAction($arItem['ID'], $arItem['EDIT_LINK'], CIBlock::GetArrayByID($arItem[\"IBLOCK_ID\"], \"ELEMENT_EDIT\"));\n\t$this->AddDeleteAction($arItem['ID'], $arItem['DELETE_LINK'], CIBlock::GetArrayByID($arItem[\"IBLOCK_ID\"], \"ELEMENT_DELETE\"), array(\"CONFIRM\" => GetMessage('CT_BNL_ELEMENT_DELETE_CONFIRM')));\n\t?>\n\t\t<div class=\"col col-md-4 <?if($i > 0){?>col-md-offset-1<?} ?>\" id=\"<?=$this->GetEditAreaId($arItem['ID']);?>\">\n\t\t<img src=\"\"PREVIEW_PICTURE\"][\"SRC\"]?>\" alt=\"\"PREVIEW_PICTURE\"][\"ALT\"]?>\" title=\"\"PREVIEW_PICTURE\"][\"TITLE\"]?>\" class=\"thumbnail\">\n\t\t\t<div class=\"caption\">\n\t\t\t<h3><?echo $arItem[\"NAME\"]?></h3>\n\t\t\t<P><?=$arItem[\"PROPERTIES\"][\"POSITION\"][\"VALUE\"]?></P>\n\t\t\t</div>\n\t\t</div>\n\n<?\n$i++;\nif ($i >= 5) {\n   $i = 0;\n?>\n   </div><div class=\"row\">\n<?\n}\n?>\n<?endforeach;?>\n\n<?\nif ($i > 0) {\n?>\n   </div>\n<?\n}\n?>\n<?if($arParams[\"DISPLAY_BOTTOM_PAGER\"]):?>\n\t<br /><?=$arResult[\"NAV_STRING\"]?>\n<?endif;?>\n</div>\n\r\nМы не стали заморачиваться с выносом кода свойства в параметры, а так же с настройкой количества элементов в строке, чтобы не усложнять шаблон компонента.\r\nКак видите, в нём практически ничего не осталось от первоначального шаблона списка новостей (и он гораздо легче громоздкого компонента каталога).\n\nНе забудьте удалить ненужную более папку /bitrix/templates/whitesquare-bootstrap/images/team/ с картинками в шаблоне после перевода блока с персонами на инфоблок! \n\nТекст страницы ABOUT\r\nПоскольку у нас нет понимания какие функции выполняют остальные элементы страницы, должна ли появляться случайная цитата или, скажем, должны ли картинки вести в фотогалерею, мы пойдём по простому пути.\r\nВесь контент останется статичным, мы лишь добавим несколько стилей, чтобы будущие редакторы могли работать со страницей с большим удобством.\r\nДля этого воспользуемся файлом стилей сайта, приложенном к нашему шаблону /bitrix/templates/whitesquare-bootstrap/styles.css (или административным разделом):\r\nПоскольку этот файл используется для применения CSS к контенту в том числе в визуальном редакторе, нам придётся «забыть» о каскадности CSS и прописать стили без учёта вложенности элементов.\r\nНапример, цитата станет выглядеть так:\n.jumbotron {\n            border-radius: 0;\n              \tpadding: 0;\n            margin: 0;\nfont-size: 18px;\nfont-weight: 200;\nbackground-color: #29c5e6;\nbox-sizing: border-box;\ncolor: #ffffff;\nline-height: 2.1428571435;\ndisplay: block;\nbox-sizing: border-box;\nfont-family: Tahoma, sans-serif;\n\n            blockquote {\n                border-left: none;\n\n                p {\n                    font: 300 italic 33px @brand-font;\n                    text-transform: uppercase;\n                    margin-bottom: 0;\n                    color: #ffffff;\n                }\n\n                small {\n                    display: block;\n                    text-align: right;\n                    color: #1D8EA6;\n                    color: #1D8EA6;\n                    font: 300 20px @brand-font;\n\n                    &:before {\n                        content: '';\n                    }\n                }\n            }\n        }\n\n\r\nДля того, чтобы редакторы могли сами применить этот стиль с помощью виз редактор необходимо добавить в файл .styles.php в корне шаблона массив стилей:\n<?\nreturn array(\n\t\"jumbotron\" => \"цитата\",\n);\n?>\n\r\nИли через инструмент редактирования шаблона (вкладка «стили сайта»):\n\n\nНаводим марафет\r\nС целью немного облегчить работу редакторов можно создать в шаблоне сайта папку /page_templates/, где будут находиться шаблоны страниц, которые можно создавать ан проекте по умолчанию.\r\nШаблон страницы представляет из себя обычный php файл, идентичный странице в публичной части.\r\nПомимо шаблонов необходимо так же разместить файл .content.php с массивом всех возможных шаблонов страниц. В нашем случае это будет:\n<?if(!defined(\"B_PROLOG_INCLUDED\") || B_PROLOG_INCLUDED!==true)die();?><?\nIncludeTemplateLangFile(__FILE__);\n$TEMPLATE[\"about.php\"] = Array(\"name\"=>GetMessage(\"about\"), \"sort\"=>1);\n?>\n\r\nНе забудем создать языковые файлы!\n\n/bitrix/templates/whitesquare-bootstrap/lang/ru/page_templates/.content.php\n/bitrix/templates/whitesquare-bootstrap/lang/ru/page_templates/.content.php\n\n\r\nДля того чтобы шаблон не был неопознанным объектом для имеющих доступ к административному разделу оформим файл описания и приложим скриншот! Они подхватятся автоматически:\n\nОписание — description.php в корне шаблона\n<?$arTemplate = array(\n\t\"NAME\" => \"Шаблон 1 страницы для ХабраХабр\",\n\t\"DESCRIPTION\" => \"Шаблон на основе Bootstrap вёрстки в светло-синих тонах\",\n\t\"SORT\" => 100,\n);\n?>\n\nСкриншот — screen.gif в корне шаблона\n\n\nВот собственно и всё!\n\n\r\nМы натянули готовую HTML вёрстку Bootstrap на 1С-Битрикс, сверстали страницу и получили полноценный шаблон!\n\nПослесловие\n\r\nСтатья получилась очень длинная, поэтому очень непросто вычитать все неточности и опечатки. Если вы нашли ошибку – напишите мне в личку, и я с удовольствием её исправлю!\r\nОгромное спасибо Mirantus за оригинальную статью и готовую вёрстку, которую я смог взять за основу!\r\nВ качестве небольшого бонуса в GitHub проекте помимо собственно шаблона и страниц я разместил папку IMPORT_DATA, в которой содержится дамп демо-данных для единственного инфоблока с членами команды, фигурировавшего в статье. Вы можете импортировать его как XML на странице /bitrix/admin/iblock_xml_import.php?lang=ru\n\nПолезные ссылки:\n\nДизайн Corporate Blue (оригинал)\nСтатья «Как сверстать веб-страницу. Часть 2 — Bootstrap»\nПроект на GitHub (демо-контент + шаблон)\nШаблон 1С-Битрикс (CP-1251)\nDEMO на 1С-Битрикс (работает до 5 марта, после чего ссылку из статьи удалю)\n "
]